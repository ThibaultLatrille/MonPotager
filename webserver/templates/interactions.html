<!DOCTYPE html>
<html>
<head>
<title>MonPotager - Interactions</title>
{% include 'head.inc.html' %}
</head>
<body>
{% include 'header.inc.html' %}
<div class="container">
    <!-- Left menu -->
    <nav class="panel" style="max-width: 512px;">
        <p class="panel-heading">Ajouter des plantes
            <span style="float: right;" title="Trier par nom alphabétiquement ou par type de plante puis nom"><i class="fas fa-sort-alpha-down"></i> <span class="select is-small"><select id="sort_list">
                    <option value="n">nom</option>
                    <option value="tn">type puis nom</option>
                </select></span>
            </span>
        </p>
        <div class="panel-block"><p class="control has-icons-left container-jets">
            <input class="input is-small" placeholder="Chercher" id="jets-MonPotager-search">
            <span class="icon is-small is-left"><i class="fas fa-search"></i></span>
        </p></div>
        <p class="panel-tabs is-hidden-mobile is-size-7" id="letters">
            {% for l in "ABCDEFGHIJKLMNOPQRSTUVWXYZ" %}<a href="#go-{{l}}" data-letter="{{ letter }}">{{l}}</a> {% endfor %}
            {#{% for letter in first_letter %}
            <span data-letter="{{ letter }}" class="btn-letter btn btn-default btn-sm" style="padding: 5px 0">{{ letter }}</span>
            {% endfor %}#}
        </p>
        <label class="panel-block is-size-7"><input type="checkbox" /> Cacher les interactions défavorables avec les plantes déjà dans mon potager</label>
        <!--<table class="panel-block table table-sm is-striped is-fullwidth">
            <thead><th></th><th>Nom</th><th></th></thead>
            <tbody>

            </tbody>
        </table>-->
        <p class="panel-heading">Dans mon potager
            <span style="float: right;">
                <a id="save-btn" class="button is-success is-small" style="margin-right: 4px"><i class="fas fa-download"></i></a>
                <a id="calendar-btn" href="#" data-toggle="modal" class="button is-info is-small" style="margin-right:16px" data-target="#calendar"><i class="far fa-calendar-alt"></i></a>
                <a href="#" data-toggle="modal" class="button is-small" data-target="#reset"><i class="fas fa-sync"></i></a>
            </span>
        </p>
        <p class="panel-block"><strong>Plantes</strong> <span style="float: right;" class="is-size-7">
                <span><i class="fas fa-tree tree"></i> Arbre</span>
                <span><i class="fas fa-pepper-hot herb"></i> Arômate</span>
                <span><i class="fas fa-seedling cereal"></i> Céréale</span>
                <span><i class="fas fa-fan flower"></i> Fleur</span>
                <span><i class="fas fa-apple-alt fruit"></i> Fruit</span>
                <span><i class="fas fa-carrot vegetable"></i> Légume</span>
            </span>
        </p>
        <p class="panel-block"><strong>Auxiliaires</strong> <span style="float: right;" class="is-size-7"><i class="fas fa-cat auxiliary"></i>Auxiliaire</span>
        </p>
        <div class="panel-block level"><strong>Nuisibles &amp; maladies</strong> <span style="float: right;" class="is-size-7">
                <span><i class="fas fa-bug pest"></i> Nuisible</span>
                <span><i class="fas fa-skull-crossbones sickness"></i> Maladie</span>
            </span>
        </div>
    </nav>
</div>

<div class="container-fluid">
    <span id="on-screen-test"></span>
    <div class="row">
        <div class="col-xs-12 col-md-3 info-side col-left" style="padding-top: 10px;">
            <div class="panel panel-default panel-MonPotager">
                <div class="panel-heading"><b>Dans mon potager</b>
                    
                </div>
                <div id="upper-left" class="panel-body">
                    <div id="alert-save"></div>
                    <div id="plants" class="padding-div">
                        <span id="plants-count" class="text-bold" data-singular="plante :" data-plural="plantes :"></span><br/>
                        {#{% for key, value in appartenance if value in cat_plants %}
                        <span data-value="{{ key }}" class="potager-item potager-item-{{ key }} links hidden">{{ plants[key] }};</span>
                        {% endfor %}#}
                    </div>
                    <div id="interaction-pos" class="padding-div">
                        <i class="far fa-check-circle green"></i></span>
                        <span id="interaction-pos-count" class="text-bold" data-singular="interaction favorable." data-plural="interactions favorables."></span> <br/>
                    </div>
                    <div id="helpers" class="padding-div">
                        <i class="far fa-check-circle green"></i></span>
                        <span id="helpers-count" class="text-bold"
                              data-singular="auxiliaire attiré :"
                              data-plural="auxiliaires attirés :"></span><br/>
                        {#{% for key, value in appartenance if value == 6 %}
                        <span data-value="{{ key }}" class="potager-item potager-item-{{ key }} links hidden">{{ plants[key] }};</span>
                        {% endfor %}#}
                        <br/>
                    </div>
                    <div id="repelled-pests" class="padding-div">
                        <i class="far fa-check-circle green"></i></span>
                        <span id="repelled-pests-count" class="text-bold" data-singular="nuisible écarté :" data-plural="nuisibles écartés :"></span><br/>
                        {#{% for key, value in appartenance if value == 5 %}
                        <span data-value="{{ key }}" class="potager-item potager-item-{{ key }} links hidden">{{ plants[key] }};</span>
                        {% endfor %}#}
                        <br/>
                    </div>
                    <div id="interaction-neg" class="padding-div">
                        <i class="far fa-times-circle red"></i></span>
                        <span id="interaction-neg-count" class="text-bold" data-singular="interaction défavorable." data-plural="interactions défavorables."></span> <br/>
                    </div>
                    <div id="pests" class="padding-div">
                        <i class="far fa-times-circle red"></i></span>
                        <span id="pests-count" class="text-bold" data-singular="nuisible :" data-plural="nuisibles :"></span><br/>
                        {#{% for key, value in appartenance if value == 5 %}
                        <span data-value="{{ key }}"
                              class="potager-item potager-item-{{ key }} links hidden">
                            {{ plants[key] }};
                        </span>
                        {% endfor %}#}
                        <br/>
                    </div>
                </div>
            </div>
            <div id="info" class="panel panel-default panel-MonPotager no-margin-bottom hidden">
                <div class="panel-heading clearfix">
                    <button id="remove-selected" class="btn btn-danger btn-sm pull-right"><i class="fas fa-trash-alt"></i></button>
                    <b><span id="info-name"></span></b>
                </div>
                <div class="panel-body">
                    <a href="" id="wiki-btn" class="links pull-right" target="_blank" style="margin-bottom: 15px"><i class="fab fa-wikipedia-w"></i> Wikipedia</a>
                    {#{% for inter in ["pos","atr","neg","rep"] %}
                    {% for direction in ["forward", "backward"] %}
                    <div id="node-{{ direction }}-{{ inter }}" class="padding-div">
                        {% if inter in ["pos", "atr"] %}
                        <i id="glyph-{{ direction }}-{{ inter }}" class="far fa-check-circle green"></i>
                        {% else %}
                        <i id="glyph-{{ direction }}-{{ inter }}" class="far fa-times-circle red"></i>
                        {% endif %}
                        <b>{{ interactions[direction][inter] }} :</b><br/>
                        <span class="text"></span><span class="btn-filter links"></span>
                    </div>
                    {% endfor %}
                    {% endfor %}#}
                    <div id="helpers-links">
                        <i class="far fa-check-circle green"></i>
                        <b>Attirer des auxilliaires pour le repousser :</b>
                        <div id="helpers-container"></div>
                    </div>
                </div>
            </div>
        </div>
        <svg id="graph"></svg>
        <div class="col-xs-12 col-md-3 info-side col-right"
             style="display: flex; flex-flow: column; max-height: 100%; height: 100%; padding-top: 10px;">
            <div class="panel panel-default panel-MonPotager no-margin-bottom"
                 style="flex: 0 1 auto; display: flex; flex-flow: column; overflow-y: hidden; max-height: 100%; height: 100%;">
                <div class="panel-heading" style="flex: 0 1 auto;"><b>Ajouter des plantes</b></div>
                <div class="panel-body"
                     style="flex: 0 1 auto; display: flex; flex-flow: column; overflow-y: hidden; max-height: 100%; height: 100%;">
                    <div class="filter-bow" style="flex: 0 1 auto;">
                        <div id="filter" class="btn btn-primary btn-sm hidden">
                            <span id="filter-name"></span>
                            <i class="far fa-times-circle"></i>
                        </div>
                    </div>
                    <div id="jets-MonPotager-content" style="flex: 0 1 auto; overflow: auto;" data-toggle="buttons">
                        {#{% for key, value in appartenance if value in cat_plants %}
                        <div id="plant-{{ key }}" data-value="{{ key }}" data-letter="{{ plants[key][0] }}" class="btn btn-default btn-sm plant btn-plant col-xs-12">
                            <b>{{ plants[key] }}</b>
                            (<span class="plus"></span>&nbsp;<span class="far fa-check-circle green" style="font-size: 0.8em"></span>&nbsp;/&nbsp;
                            <span class="minus"></span>&nbsp;<span class="far fa-times-circle red"   style="font-size: 0.8em"></span>)

                        </div>
                        {% endfor %}#}
                    </div>
                </div>
            </div>
            <div style="flex: 1 1 auto; padding-bottom: 60px">
                <br/>
                <div class="panel panel-default no-margin-bottom">
                    <div class="breadcrumb clearfix no-margin-bottom">
                        <a data-toggle="collapse" href="#legend" class="pull-right fas fa-chevron-down"></a>
                        <a data-toggle="collapse" href="#legend" class="text-left">Masquer la légende</a>
                    </div>
                    <div id="legend" class="panel-collapse collapse in" role="tabpanel">
                        <div class="panel-body">
                            {#{% for example in examples %}
                            <div class="breadcrumb-item">
                                <b>{{ example['description'] }} :</b>
                                <svg class="example" width="200" height="30">
                                    <path class="link {{ example['link'] }}"
                                          marker-end="url(#{{ example['link'] }})"
                                          d="M30 30 Q 105 -25 180 30"></path>
                                    <g class="node" transform="translate(30,30)" style="opacity: 1;">
                                        <circle fill="{{ example['color_source'] }}" r="10"></circle>
                                        <text x="11" y="-4">{{ example['name_source'] }}</text>
                                    </g>
                                    <g class="node" transform="translate(180,30)" style="opacity: 1;">
                                        <circle fill="{{ example['color_target'] }}" r="10"></circle>
                                        <text x="11" y="-4">{{ example['name_target'] }}</text>
                                    </g>
                                </svg>
                            </div>
                            {% endfor %}
                            {% for cat, color in categories %}
                            <span style="font-size: 1.2em;">
                             <b style='color: {{ color }}; text-shadow: -1px -1px 0 #000,  1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;'>
                                 <i class="fas fa-stop"></i></b>&nbsp;{{ cat }};
                            </span>
                            {% endfor %}#}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% include 'footer.inc.html' %}
<div class="modal fade" id="wiki-modal" tabindex="-1">
    <div class="modal-background"></div>
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Wikipedia</h4>
        </div>
        <div class="modal-body">
            <div id="wiki-div"></div>
        </div>
        <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button></div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
<div class="modal fade" id="reset" tabindex="-1">
    <div class="modal-background"></div>
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Initialiser MonPotager.</h4>
        </div>
        <div class="modal-body">
            <b>Niveau 1 (débutant), </b>un potager avec uniquement des interactions positives : <br/>
            <button id="reset-1" data-plants="Ail|Betterave|Camomille allemande|Carotte|Oignon|Pommier"
                    type="button"
                    class="btn btn-primary center-block reset-btn" data-dismiss="modal" style="margin-top: 5px">Ail,
                betterave, camomille
                allemande, carotte, oignon, pommier
            </button>
            <br/>
            <b>Niveau 2 (intermédiaire), </b>un potager avec des nuisibles dont il faut vous débarrasser : <br/>
            <button id="reset-0" data-plants="Carotte|Pommier|Betterave|Haricot" type="button" class="btn btn-primary center-block reset-btn" data-dismiss="modal" style="margin-top: 5px">Carotte, pommier, betterave et haricot</button>
            <br/>
            <b>Niveau 3 (confirmé), </b>à vous de jouer : <br/>
            <button id="reset-2" data-plants="" type="button" class="btn btn-primary center-block reset-btn" data-dismiss="modal" style="margin-top: 5px">A partir de rien</button>
            <br/>
            <div id="my-saves" class="clearfix">
                <b>Mes sauvegardes</b>
                <div id="my-save-list"></div>
                <button id="saves-remove" class="btn btn-danger btn-sm pull-right">Supprimer mes sauvegardes <i class="fas fa-trash-alt"></i></button>
            </div>
        </div>
        <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button></div>
    </div
    ><button class="modal-close is-large" aria-label="close"></button>
</div>

<div class="modal" id="calendar" tabindex="-1"><!--Code de la fenêtre affichant le calendrier-->
    <div class="modal-background"></div>
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Calendrier de semis</h4>
        </div>
        <div class="modal-body">
            <table class="table">
                <tr>
                    {% for months in
                    ['Plantes','Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre']
                    %}<!--Mois en Français pour l'instant-->
                    <th scope="col">{{ months }}</th>
                    {% endfor %}
                </tr>
                <tbody id="plantCalendar">
                {#{% for key, value in appartenance if value in cat_plants %}<!--Parcourir les plantes pour créer une ligne par plante -->
                <tr data-value="{{ key }}" class="potager-item potager-item-{{ key }} links hidden" >
                    <th scope="row" valign="bottom">{{ plants[key] }}</th>
                    {% for mo in months[plants[key]] %}
                    {% if mo=='S' %}<!--En fonction de Harvest, grow ou seed la cellule aura une typo différente-->
                    <td bgcolor="#67c23d" style="height: 10px;"><img src="{{STATIC_URL}}/images/Seed.png" width="40"
                                                                        height="27"/></td>
                    {% elif mo=='G' %}
                    <td bgcolor="#ceca73" style="height: 10px;"><img src="{{STATIC_URL}}/images/Grow.png" width="40"
                                                                        height="27"/></td>
                    {% elif mo=='H' %}
                    <td bgcolor="#88b2ff" style="height: 10px;"><img src="{{STATIC_URL}}/images/Harvest.png" width="40"
                                                                        height="27"/></td>
                    {% elif mo=='' %}
                    <td bgcolor="#ff8888" style="height: 10px;"></td>
                    {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}#}
                </tbody>
            </table>
        </div>
        <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button></div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
<script src="{{STATIC_URL}}/js/d3.{{ minified }}js"></script>
<script src="{{STATIC_URL}}/js/data.{{ minified }}js"></script>
<script src="{{STATIC_URL}}/js/MonPotager.{{ minified }}js"></script>
<script>

</script>
</body>
</html>
